## 中间件、拦截器、过滤器

一个良好的服务端，应该是要有日志收集功能，一旦生产环境出现问题的时候，就可以把日志拎出来复盘，找出bug

使用工具:`log4js`

## 一、配置

安装依赖

```shell
$ yarn add log4js stacktrace-js -S
```

config目录下新建一个文件`log4js.ts`用于编写配置文件

```ts


```



## 二、实例化

## 三、中间件

客户端请求接口时，`自动记录请求的路由、ip、参数等信息`，你不可能配置到每个路由当中，这就引入了中间件的概念

**中间件函数执行了已下任务**

* 执行任何代码
* 对请求的和响应对象进行更改
* 结束请求 - 响应周期
* 调用堆栈中的下一个中间件函数，中间件递归
* 强制调用（未能正常结束请求||响应周期）通过`next()`将控制权下一个中间件函数，否则请求将被挂起